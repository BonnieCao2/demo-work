<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>KineticJS</title>
    <script src="kinetic-v5.1.0.min.js"></script>
</head>

<body>
<script>
    var stage;
    function loadImage() {
        var image = new Image();
        image.onload = function() {
            var kimage = new Kinetic.Image({
                x: 100,
                y: 100,
                width : 200,
                height : 200,
                image: image,
                detectionType: "pixel"
            });

            //绑定事件响应方法
            kimage.on("click", function() {
                alert("image clicked");
            });

            var layer = new Kinetic.Layer();
            layer.add(kimage);
            stage.add(layer);

            //保存数据以响应事件
            kimage.saveData();
        };

        //图像需要与此页面在同一个服务器上, 否则会Javascript会抛出安全异常
        image.src = "a.png";
    }

    window.onload = function() {
        stage = new Kinetic.Stage({
            container: "container",
            width: 600,
            height: 400
        });

        var rect = new Kinetic.Rect({
            x: 400,
            y: 100,
            width: 100,
            height: 100,
            fill: "red",
            detectionType: "pixel"
        });

        //绑定事件响应方法
        rect.on("click", function() {
            alert("rect clicked");
        });

        var layer = new Kinetic.Layer();
        layer.add(rect);
        stage.add(layer);

        //保存数据以响应事件
        rect.saveData();
        loadImage();
    };
</script>
<div id="container"></div>
</body>

</html>
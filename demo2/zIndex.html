<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>KineticJS</title>
    <script src="kinetic-v5.1.0.min.js"></script>
    <script src="jquery-1.8.0.js"></script>
</head>
<body>
<button id="btn" style="width: 100px;height: 50px;"></button>
<script>
    /*
    * date=2018-10-23
    * author:曹天依
    * Notes:
    * 1.船舶靠海岸线
    * 2.船舶点击菜单
    * 3.新版首页打开tab修复
    * */
    /*
    * date=2018-10-26
    * author:曹天依
    * Notes:
    * 1.箱染色demo之层高染色
    * 2.框选展示箱区（倒着，可删除，染色可带入，内外皆可点击打开列表页）
    * 3.海测是否可通行标识（背景色区分）
    * 4.列表页归并以及右击菜单展示箱信息
    * */
    window.onload = function () {
        var stage = new Kinetic.Stage({
            container: "container",
            width: 980,
            height: 980,
            draggable : true
        });

        var layer = new Kinetic.Layer();

        //创建一个要加进组中的圆
        var circle = new Kinetic.Circle({
            x: 200,
            y: 200,
            radius: 50,
            fill: "red"
        });

        //创建一个要加进组中的矩形
        var rect = new Kinetic.Rect({
            x: 200,
            y: 200,
            width: 100,
            height: 100,
            fill: "blue"
        });

        //创建group对象
        var group1 = new Kinetic.Group({
                id: 'circleGroup'
            }),
            group2 = new Kinetic.Group({
                id: 'rectGroup'
            }),
            group3 = new Kinetic.Group({
                id: 'Group3'
            });
        //把多个图形对象添加到group里
        group1.add(circle);
        group2.add(rect);
        //把group对象添加到层里
        layer.add(group1).add(group2).add(group3);
        //将层添加到舞台中
        stage.add(layer);

        // layer.find('#circleGroup').moveToTop()
        group1.moveToTop()
        layer.batchDraw()

        console.log(layer)

        var rect3 = new Kinetic.Rect({
            x: 200,
            y: 200,
            width: 50,
            height: 50,
            fill: "green"
        });
        // group3.add(rect3);
        // layer.add(group3);
        // layer.batchDraw();

        // group1.moveToTop()
        // layer.batchDraw();

        $('#btn').on('click',function () {
            var rect3 = new Kinetic.Rect({
                x: 200,
                y: 200,
                width: 50,
                height: 50,
                fill: "green"
            });
            group3.add(rect3);
            // layer.add(group3);
            layer.batchDraw();

            // group1.moveToTop()
            // layer.batchDraw();
        })

    };
</script>
<div id="container"></div>
</body>
</html>